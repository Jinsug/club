// 过滤器
var filters = {
  toFixed: function (num, length) {
    if (!isNaN(num)) {
      return parseFloat(num).toFixed(length);
    } else {
      return num;
    }
  },
  overflow_hidden: function (text, length) {
    if(text){
      if (text.length > length) {
        text = text.substring(0, length) + '...';
      }
    }
    return text;
  },
  active_target: function (days, target, value){
    var company = target == 'A' || target == 'B' ? '公斤' : '次';
    var targetText = { A: '体重减少', B: '体重增加', C: '健身时间', D: '健身次数'};
    return days + '天' + targetText[target] + value + company;
  },
  week_date: function (value) {
      if ( "0" == value ) {
        value = "周一";
      } 
      if ( "1" == value ) {
        value = "周二";
      }
      if ( "2" == value ) {
        value = "周三";
      }
      if ( "3" == value ) {
        value = "周四";
      }
      if ( "4" == value ) {
        value = "周五";
      }
      if ( "5" == value ) {
        value = "周六";
      }
      if ( "6" == value ) {
        value = "周日";
      }
      
      return value;
    },
    /**
     * 字符串null过滤
     */
    stringNull: function (str) {
       if (str == "null" || str == null) {
         return "暂无";
       } else {
         return str;
       }
    }
}

// 暴露接口
module.exports = {
  toFixed: filters.toFixed,
  overflow_hidden: filters.overflow_hidden,
  active_target: filters.active_target,
  week_date: filters.week_date,
  stringNull: filters.stringNull
}